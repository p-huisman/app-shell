var y=(r,e,t)=>new Promise((s,i)=>{var o=n=>{try{c(t.next(n))}catch(l){i(l)}},m=n=>{try{c(t.throw(n))}catch(l){i(l)}},c=n=>n.done?s(n.value):Promise.resolve(n.value).then(o,m);c((t=t.apply(r,e)).next())});function P(r){if(typeof r!="object")throw new Error("single-spa-blazor-wasm requires a configuration object");if(!r.appTagName)throw new Error("single-spa-blazor-wasm must be given customElementTagName");if(r.domElementGetter&&typeof r.domElementGetter!="function")throw new Error("single-spa-blazor-wasm domElementGetter must be a function");let e={appTemplate:document.createElement("template"),blazor:void 0,originalCachesOpen:()=>{throw new Error("Original caches.open has not been stored yet.")}};return{bootstrap:E.bind(null,r,e),mount:B.bind(null,r,e),unmount:h.bind(null,r,e)}}function E(r,e,t){return Promise.resolve()}function B(r,e,t){return y(this,null,function*(){let{name:s}=t,i=d(r),o=t.assetBaseUrl||r.assetBaseUrl||new URL(document.baseURI),m=t.navigationBaseUrl||r.navigationBaseUrl||new URL(document.baseURI);if(e.originalCachesOpen=globalThis.caches.open,globalThis.caches.open=function(l){return e.originalCachesOpen.call(globalThis.caches,`${l}-${s}`)},e.blazor===void 0){yield import(new URL("_framework/blazor.webassembly.js",o).href),e.blazor=window.Blazor,yield Promise.all(i.flatMap(a=>a.additionalImportPaths?a.additionalImportPaths.map(f=>import(new URL(f,o).href)):Promise.resolve()));for(let a of i)a.beforeBlazorStart&&(yield Promise.resolve(a.beforeBlazorStart(o)));let l=i.flatMap(a=>a.stylePaths?a.stylePaths.map(f=>{let p=document.createElement("link");return p.rel="stylesheet",p.href=new URL(f,o).href,p}):[]);if(e.appTemplate.content.append(...l,document.createElement(r.appTagName)),r.injectRefreshScript){let a=document.createElement("script");a.src=new URL("_framework/aspnetcore-browser-refresh.js",o).href,e.appTemplate.content.append(a)}yield e.blazor.start({assetBaseUrl:o,navigationBaseUrl:m,loadBootResource:function(a,f,p,x,z){let b=new URL(p,o).href;switch(a){case"dotnetjs":return b;default:return fetch(b,{credentials:"omit"})}},configureRuntime:a=>{r.configureRuntime&&r.configureRuntime(a,t)}})}else{e.blazor.restoreGlobalState(),e.blazor.ensureDomListenersReady();for(let l of i)l.afterBlazorRestore&&(yield Promise.resolve(l.afterBlazorRestore(e.blazor)))}e.blazor.navigateTo(document.location.href,{replaceHistoryEntry:!0,forceLoad:!1});let n=u(r,t)(t);n&&n.replaceChildren(e.appTemplate.content.cloneNode(!0))})}function h(r,e,t){return y(this,null,function*(){let s=d(r),o=u(r,t)(t);if(o){o.replaceChildren(),yield e.blazor.ensureRazorComponentsDisposed(),e.blazor.ensureDomListenersRemoved(),e.blazor.clearGlobalState();for(let m of s)m.afterBlazorClear&&(yield Promise.resolve(m.afterBlazorClear(e.blazor)))}globalThis.caches.open=e.originalCachesOpen})}function d(r){var e;return[...(e=r.appExtensions)!=null?e:[],{stylePaths:r.stylePaths,additionalImportPaths:r.additionalImportPaths,beforeBlazorStart:r.beforeBlazorStart,afterBlazorRestore:r.afterBlazorRestore,afterBlazorClear:r.afterBlazorClear}]}function u(r,e){let t=e.domElement;return t?()=>t:e.domElementGetter?e.domElementGetter:r.domElementGetter?r.domElementGetter:g(e)}function g(r){if(!r.name)throw new Error("single-spa-blazor-wasm was not given an application name as a prop");let e=`single-spa-application:${r.name}`;return function(){let s=document.getElementById(e);return s||(s=document.createElement("div"),s.id=e,document.body.appendChild(s)),s}}export{P as default};
